define("way.min",function(t,e,r){!function(t,n){"function"==typeof define&&define.amd?define(n):"object"==typeof e?r.exports=n():t.way=n()}(this,function(){"use strict";var t,e,r="way",n=function(){this._watchers={},this._watchersAll={}};n.prototype.constructor=n,n.prototype.watchAll=function(t){this._watchersAll=this._watchersAll||[],d.contains(this._watchersAll,t)||this._watchersAll.push(t)},n.prototype.watch=function(t,e){this._watchers||(this._watchers={}),this._watchers[t]=this._watchers[t]||[],this._watchers[t].push(e)},n.prototype.findWatcherDeps=function(t){var e=[],r=d.keys(this._watchers);return r.forEach(function(r){a(t,r)&&e.push(r)}),e},n.prototype.emitChange=function(t){this._watchers||(this._watchers={});var e=this,r=e.findWatcherDeps(t);r.forEach(function(t){e._watchers[t]&&e._watchers[t].forEach(function(r){r.apply(e,[e.get(t)])})}),e._watchersAll&&d.isArray(e._watchersAll)&&e._watchersAll.forEach(function(r){d.isFunction(r)&&r.apply(e,[t,e.get(t)])})};var o=function(){this.data={},this._bindings={},this.options={persistent:!0,timeoutInput:50,timeoutDOM:500}};o.prototype=Object.create(n.prototype),o.constructor=o,o.prototype.dom=function(t){return this._element=e.dom(t).get(0),this},o.prototype.toStorage=function(t,e){var r=this,e=e||r._element,t=t||r.dom(e).getOptions(),n=r.dom(e).toJSON(t),o=r.dom(e).scope(),i=o?o+"."+t.data:t.data;return t.readonly?!1:void r.set(i,n,t)},o.prototype.toJSON=function(t,e){var r=this,e=e||r._element,n=r.dom(e).getValue(),t=t||r.dom(e).getOptions();return d.isArray(t.pick)&&(n=l(n,t.pick,!0)),d.isArray(t.omit)&&(n=l(n,t.omit,!1)),n},o.prototype.fromStorage=function(t,e){var r=this,e=e||r._element,t=t||r.dom(e).getOptions();if(t.writeonly)return!1;var n=r.dom(e).scope(),o=n?n+"."+t.data:t.data,i=r.get(o);r.dom(e).fromJSON(i,t)},o.prototype.fromJSON=function(t,e,r){var n=this,r=r||n._element,e=e||n.dom(r).getOptions();if(e.writeonly)return!1;if(d.isObject(t)){d.isArray(e.pick)&&(t=l(t,e.pick,!0)),d.isArray(e.omit)&&(t=l(t,e.omit,!1));var o=d.isObject(n.dom(r).toJSON())?n.dom(r).toJSON():{};t=d.extend(o,t)}e.json&&(t=N.isStringified(t)?t:N.prettyprint(t)),n.dom(r).setValue(t,e)},o.prototype.getValue=function(t){var r=this,t=t||r._element,n={SELECT:function(){return e.dom(t).val()},INPUT:function(){var r=e.dom(t).type();return d.contains(["text","password"],r)?e.dom(t).val():d.contains(["checkbox","radio"],r)?e.dom(t).prop("checked")?e.dom(t).val():null:void 0},TEXTAREA:function(){return e.dom(t).val()}},o=function(){return e.dom(t).html()},i=e.dom(t).get(0).tagName,a=n[i]||o;return a()},o.prototype._transforms={uppercase:function(t){return d.isString(t)?t.toUpperCase():t},lowercase:function(t){return d.isString(t)?t.toLowerCase():t},reverse:function(t){return t&&t.split&&d.isFunction(t.split)?t.split("").reverse().join(""):t}},o.prototype.registerTransform=function(t,e){var r=this;d.isFunction(e)&&(r._transforms[t]=e)},o.prototype.setValue=function(t,r,n){var o=this,n=n||o._element,r=r||o.dom(n).getOptions();r.transform=r.transform||[],r.transform.forEach(function(e){var r=o._transforms[e]||function(t){return t};t=r(t)});var i={SELECT:function(t){e.dom(n).val(t)},INPUT:function(t){d.isString(t)||(t=JSON.stringify(t));var r=e.dom(n).get(0).type;d.contains(["text","password"],r)&&e.dom(n).val(t||""),d.contains(["checkbox","radio"],r)&&(t===e.dom(n).val()?e.dom(n).prop("checked",!0):e.dom(n).prop("checked",!1))},TEXTAREA:function(t){d.isString(t)||(t=JSON.stringify(t)),e.dom(n).val(t||"")},PRE:function(t){r.html?e.dom(n).html(t):e.dom(n).text(t)},IMG:function(t){if(!t)return t=r.default||"",e.dom(n).attr("src",t),!1;var o=function(t,r){e.dom(n).addClass("way-loading"),e.dom("img",{src:t,onerror:function(){r(!1)},onload:function(){r(!0)}})};o(t,function(o){e.dom(n).removeClass("way-loading"),o?e.dom(n).removeClass("way-error").addClass("way-success"):(t?e.dom(n).addClass("way-error"):e.dom(n).removeClass("way-error").removeClass("way-success"),t=r.default||""),e.dom(n).attr("src",t)})}},a=function(t){r.html?e.dom(n).html(t):e.dom(n).text(t)},s=e.dom(n).get(0).tagName,u=i[s]||a;u(t)},o.prototype.setDefault=function(t,e,r){var n=this,r=r||n._element,t=t||!1,e=e?d.extend(n.dom(r).getOptions(),e):n.dom(r).getOptions();return e.default?void(t?n.set(e.data,e.default,e):n.dom(r).setValue(e.default,e)):!1},o.prototype.setDefaults=function(){var t=this,n="["+r+"-default]",o=e.dom(n).get();for(var i in o){var a=o[i],s=t.dom(a).getOptions(),u=s.data||null,c=u?t.get(u):null;c||t.dom(a).setDefault()}},o.prototype.registerBindings=function(){var t=this,n="["+r+"-data]";t._bindings={};var o=e.dom(n).get();for(var i in o){var a=o[i],s=t.dom(a).getOptions(),u=t.dom(a).scope(),n=u?u+"."+s.data:s.data;t._bindings[n]=t._bindings[n]||[],d.contains(t._bindings[n],e.dom(a).get(0))||t._bindings[n].push(e.dom(a).get(0))}},o.prototype.updateBindings=function(t){var r=this;r._bindings=r._bindings||{};var n=p(r._bindings,t);n.forEach(function(t){var n=e.dom(t).get(0)===e.dom(":focus").get(0)?!0:!1;n||r.dom(t).fromStorage()}),r._bindings.__all__&&r._bindings.__all__.forEach(function(t){r.dom(t).fromJSON(r.data)})},o.prototype.registerRepeats=function(){var t=this,n="["+r+"-repeat]";t._repeats=t._repeats||{},t._repeatsCount=t._repeatsCount||0;var o=e.dom(n).get();for(var i in o){var a=o[i],s=t.dom(a).getOptions();t._repeats[s.repeat]=t._repeats[s.repeat]||[];var u=r+'-repeat-wrapper="'+t._repeatsCount+'"',c=e.dom(a).parent("["+u+"]");if(!c.length){t._repeats[s.repeat].push({id:t._repeatsCount,element:e.dom(a).clone(!0).removeAttr(r+"-repeat").removeAttr(r+"-filter").get(0),selector:s.repeat,filter:s.filter});var l=document.createElement("div");e.dom(l).attr(r+"-repeat-wrapper",t._repeatsCount),e.dom(l).attr(r+"-scope",s.repeat),s.filter&&e.dom(l).attr(r+"-filter",s.filter),e.dom(a).replaceWith(l),t.updateRepeats(s.repeat),t._repeatsCount++}}},o.prototype.updateRepeats=function(t){var n=this;n._repeats=n._repeats||{};var o=p(n._repeats,t);o.forEach(function(t){var o="["+r+'-repeat-wrapper="'+t.id+'"]',i=n.get(t.selector),a=[];t.filter=t.filter||[],e.dom(o).empty();for(var s in i){e.dom(t.element).attr(r+"-scope",s);var u=e.dom(t.element).get(0).outerHTML;u=u.replace(/\$\$key/gi,s),a.push(u)}e.dom(o).html(a.join("")),n.registerBindings(),n.updateBindings()})},o.prototype.updateForms=function(){var t=this,n="form["+r+"-data]",o=e.dom(n).get();for(var i in o){var a=o[i],u=t.dom(a).getOptions(),c=u.data;e.dom(a).removeAttr(r+"-data");var l=e.dom(a).find("[name]").reverse().get();for(var i in l){var p=l[i],f=e.dom(p).attr("name");if(s(f,"[]")){var d=f.split("[]")[0],m="[name^='"+d+"']",v=e.dom(a).find(m).get().length;f=d+"."+v}var n=c+"."+f;u.data=n,t.dom(p).setOptions(u),e.dom(p).removeAttr("name")}}},o.prototype.registerDependencies=function(){this.registerBindings(),this.registerRepeats()},o.prototype.updateDependencies=function(t){this.updateBindings(t),this.updateRepeats(t),this.updateForms(t)},o.prototype.setOptions=function(t,n){var o=this,n=o._element||n;for(var i in t){var a=r+"-"+i,s=t[i];e.dom(n).attr(a,s)}},o.prototype.getOptions=function(t){var e=this,t=t||e._element,n={data:null,html:!1,readonly:!1,writeonly:!1,persistent:!1};return d.extend(n,e.dom(t).getAttrs(r))},o.prototype.getAttrs=function(t,r){var n=this,r=r||n._element,o=function(t,e){var r={pick:"array",omit:"array",readonly:"boolean",writeonly:"boolean",json:"boolean",html:"boolean",persistent:"boolean"},n={array:function(t){return t.split(",")},"boolean":function(t){return"true"===t?!0:"false"===t?!1:!0}},o=function(){return e},i=r[t]||null,a=n[i]||o;return a(e)},i={},s=[].slice.call(e.dom(r).get(0).attributes);return s.forEach(function(e){var r=t&&a(e.name,t+"-")?!0:!1;if(r){var n=t?e.name.slice(t.length+1,e.name.length):e.name,s=o(n,e.value);d.contains(["transform","filter"],n)&&(s=s.split("|")),i[n]=s}}),i},o.prototype.scope=function(t,n){var o=this,n=n||o._element,i=r+"-scope",a=r+"-scope-break",s=[],u="",c="["+a+"], ["+i+"]",l=e.dom(n).parents(c).get();for(var p in l){var f=l[p];if(e.dom(f).attr(a))break;var m=e.dom(f).attr(i);s.unshift(m)}return e.dom(n).attr(i)&&s.push(e.dom(n).attr(i)),e.dom(n).attr(a)&&(s=[]),u=d.compact(s).join(".")},o.prototype.get=function(t){var e=this;return void 0===t||d.isString(t)?e.data?t?N.get(e.data,t):e.data:{}:!1},o.prototype.set=function(t,e,r){if(!t)return!1;if("this"===t.split(".")[0])return console.log('Sorry, "this" is a reserved word in way.js'),!1;var n=this;if(r=r||{},t){if(!d.isString(t))return!1;n.data=n.data||{},n.data=t?N.set(n.data,t,e):{},n.updateDependencies(t),n.emitChange(t,e),r.persistent&&n.backup(t)}},o.prototype.push=function(t,e,r){if(!t)return!1;var n=this;r=r||{},t&&(n.data=t?N.push(n.data,t,e,!0):{}),n.updateDependencies(t),n.emitChange(t,null),r.persistent&&n.backup(t)},o.prototype.remove=function(t,e){var r=this;e=e||{},r.data=t?N.remove(r.data,t):{},r.updateDependencies(t),r.emitChange(t,null),e.persistent&&r.backup(t)},o.prototype.clear=function(){this.remove(null,{persistent:!0})},o.prototype.backup=function(){var t=this;if(t.options.persistent)try{var e=t.data||{};localStorage.setItem(r,JSON.stringify(e))}catch(n){console.log("Your browser does not support localStorage.")}},o.prototype.restore=function(){var t=this;if(t.options.persistent)try{var e=localStorage.getItem(r);try{e=JSON.parse(e);for(var n in e)t.set(n,e[n])}catch(o){}}catch(o){console.log("Your browser does not support localStorage.")}};var i=function(t,e){var r=["matches","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],n=null;for(var o in r)if(n=r[o],d.isFunction(t[n]))return t[n](e);return!1},a=function(t,e){return""===e?!0:null===t||null===e?!1:(t=String(t),e=String(e),t.length>=e.length&&t.slice(0,e.length)===e)},s=function(t,e){return""===e?!0:null===t||null===e?!1:(t=String(t),e=String(e),t.length>=e.length&&t.slice(t.length-e.length,t.length)===e)},u=function(t){return d.pick(t,d.compact(d.keys(t)))},c=function(t,e,r){var n=d.keys(t);return n.forEach(function(n){r?a(n,e)||delete t[n]:a(n,e)&&delete t[n]}),t},l=function(t,e,r){var n=N.flatten(t);for(var o in e)n=c(n,e[o],r);var i=N.unflatten(n);return u(i)},p=function(t,e){var r=[];if(e){var n=e.split("."),o=n[n.length-1],i=!isNaN(o);if(i){n.pop();var s=n.join(".");r=t[s]?d.union(r,t[s]):r}for(var s in t)a(s,e)&&(r=d.union(r,t[s]))}else for(var s in t)r=d.union(r,t[s]);return r},f=function(t){return t&&d.isString(t)?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):t},d={},m=Array.prototype,v=Object.prototype,h=Function.prototype,g=(Array.isArray,Object.keys),y=(h.bind,m.push),_=m.slice,b=m.concat,w=v.toString,S=v.hasOwnProperty,O=function(t,e,r,n){if(e&&d.every(t,d.isArray))return b.apply(n,t);for(var o=0,i=t.length;i>o;o++){var a=t[o];d.isArray(a)||d.isArguments(a)?e?y.apply(n,a):O(a,e,r,n):r||n.push(a)}return n},A=function(t,e,r){if(void 0===e)return t;switch(null==r?3:r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)};case 4:return function(r,n,o,i){return t.call(e,r,n,o,i)}}return function(){return t.apply(e,arguments)}};d.compact=function(t){return d.filter(t,d.identity)},d.filter=function(t,e,r){var n=[];return null==t?n:(e=d.iteratee(e,r),d.each(t,function(t,r,o){e(t,r,o)&&n.push(t)}),n)},d.identity=function(t){return t},d.every=function(t,e,r){if(null==t)return!0;e=d.iteratee(e,r);var n,o,i=t.length!==+t.length&&d.keys(t),a=(i||t).length;for(n=0;a>n;n++)if(o=i?i[n]:n,!e(t[o],o,t))return!1;return!0},d.union=function(){return d.uniq(O(arguments,!0,!0,[]))},d.uniq=function(t,e,r,n){if(null==t)return[];d.isBoolean(e)||(n=r,r=e,e=!1),null!=r&&(r=d.iteratee(r,n));for(var o=[],i=[],a=0,s=t.length;s>a;a++){var u=t[a];if(e)a&&i===u||o.push(u),i=u;else if(r){var c=r(u,a,t);d.indexOf(i,c)<0&&(i.push(c),o.push(u))}else d.indexOf(o,u)<0&&o.push(u)}return o},d.pick=function(t,e,r){var n,o={};if(null==t)return o;if(d.isFunction(e)){e=A(e,r);for(n in t){var i=t[n];e(i,n,t)&&(o[n]=i)}}else{var a=b.apply([],_.call(arguments,1));t=new Object(t);for(var s=0,u=a.length;u>s;s++)n=a[s],n in t&&(o[n]=t[n])}return o},d.has=function(t,e){return null!=t&&S.call(t,e)},d.keys=function(t){if(!d.isObject(t))return[];if(g)return g(t);var e=[];for(var r in t)d.has(t,r)&&e.push(r);return e},d.contains=function(t,e){return null==t?!1:(t.length!==+t.length&&(t=d.values(t)),d.indexOf(t,e)>=0)},d.sortedIndex=function(t,e,r,n){r=d.iteratee(r,n,1);for(var o=r(e),i=0,a=t.length;a>i;){var s=i+a>>>1;r(t[s])<o?i=s+1:a=s}return i},d.property=function(t){return function(e){return e[t]}},d.iteratee=function(t,e,r){return null==t?d.identity:d.isFunction(t)?A(t,e,r):d.isObject(t)?d.matches(t):d.property(t)},d.pairs=function(t){for(var e=d.keys(t),r=e.length,n=Array(r),o=0;r>o;o++)n[o]=[e[o],t[e[o]]];return n},d.matches=function(t){var e=d.pairs(t),r=e.length;return function(t){if(null==t)return!r;t=new Object(t);for(var n=0;r>n;n++){var o=e[n],i=o[0];if(o[1]!==t[i]||!(i in t))return!1}return!0}},d.indexOf=function(t,e,r){if(null==t)return-1;var n=0,o=t.length;if(r){if("number"!=typeof r)return n=d.sortedIndex(t,e),t[n]===e?n:-1;n=0>r?Math.max(0,o+r):r}for(;o>n;n++)if(t[n]===e)return n;return-1},d.values=function(t){for(var e=d.keys(t),r=e.length,n=Array(r),o=0;r>o;o++)n[o]=t[e[o]];return n},d.extend=function(t){if(!d.isObject(t))return t;for(var e,r,n=1,o=arguments.length;o>n;n++){e=arguments[n];for(r in e)S.call(e,r)&&(t[r]=e[r])}return t},d.isArray=function(t){return"[object Array]"===w.call(t)},d.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===w.call(t)},d.isUndefined=function(t){return void 0===t},d.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},d.each=function(t,e,r){if(null==t)return t;e=A(e,r);var n,o=t.length;if(o===+o)for(n=0;o>n;n++)e(t[n],n,t);else{var i=d.keys(t);for(n=0,o=i.length;o>n;n++)e(t[i[n]],i[n],t)}return t},d.each(["Arguments","Function","String","Number","Date","RegExp"],function(t){d["is"+t]=function(e){return w.call(e)==="[object "+t+"]"}});var x=function(t,e,r,n){var o,i=e.replace(/\[(["']?)([^\1]+?)\1?\]/g,".$2").replace(/^\./,"").split("."),a=0,s=i.length;if(arguments.length>2){for(o=t,s--;s>a;)e=i[a++],t=t[e]=d.isObject(t[e])?t[e]:{};n?d.isArray(t)?t.splice(i[a],1):delete t[i[a]]:t[i[a]]=r,r=o}else{for(;null!=(t=t[i[a++]])&&s>a;);r=s>a?void 0:t}return r},N={};N.VERSION="0.1.0",N.debug=!0,N.exit=function(t,e,r,n){if(N.debug){var o={};o.noJSON="Not a JSON",o.noString="Not a String",o.noArray="Not an Array",o.missing="Missing argument";var i={source:t,data:r,value:n};i.message=o[e]?o[e]:"No particular reason",console.log("Error",i)}},N.is=function(t){return"[object Object]"==w.call(t)},N.isStringified=function(t){var e=!1;try{e=/^[\],:{}\s]*$/.test(t.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))}catch(r){}return e},N.get=function(t,e){return void 0==t?N.exit("get","missing","json",t):void 0==e?N.exit("get","missing","selector",e):d.isString(e)?x(t,e):N.exit("get","noString","selector",e)},N.set=function(t,e,r){return void 0==t?N.exit("set","missing","json",t):void 0==e?N.exit("set","missing","selector",e):d.isString(e)?r?x(t,e,r):N.remove(t,e):N.exit("set","noString","selector",e)},N.remove=function(t,e){return void 0==t?N.exit("remove","missing","json",t):void 0==e?N.exit("remove","missing","selector",e):d.isString(e)?x(t,e,null,!0):N.exit("remove","noString","selector",e)},N.push=function(t,e,r,n){if(void 0==t)return N.exit("push","missing","json",t);if(void 0==e)return N.exit("push","missing","selector",e);var o=N.get(t,e);if(!d.isArray(o)){if(!n)return N.exit("push","noArray","array",o);o=[]}return o.push(r),N.set(t,e,o)},N.unshift=function(t,e,r){if(void 0==t)return N.exit("unshift","missing","json",t);if(void 0==e)return N.exit("unshift","missing","selector",e);if(void 0==r)return N.exit("unshift","missing","value",r);var n=N.get(t,e);return d.isArray(n)?(n.unshift(r),N.set(t,e,n)):N.exit("unshift","noArray","array",n)},N.flatten=function(t){function e(t,n){if(Object(t)!==t)r[n]=t;else if(Array.isArray(t))for(var o=0,i=t.length;i>o;o++)e(t[o],n?n+"."+o:""+o),0==i&&(r[n]=[]);else{var a=!0;for(var s in t)a=!1,e(t[s],n?n+"."+s:s);a&&(r[n]={})}}if("Object"!=t.constructor.name)return N.exit("flatten","noJSON","json",t);var r={};return e(t,""),r},N.unflatten=function(t){if(Object(t)!==t||Array.isArray(t))return t;var e,r,n,o,i,a={};for(var s in t){e=a,r="",o=0;do n=s.indexOf(".",o),i=s.substring(o,-1!==n?n:void 0),e=e[r]||(e[r]=isNaN(parseInt(i))?{}:[]),r=i,o=n+1;while(n>=0);e[r]=t[s]}return a[""]},N.prettyprint=function(t){return JSON.stringify(t,void 0,2)};var j=function(){};j.constructor=j,j.prototype.dom=function(t,e){var r=this,n=[];if(!e)return d.isString(t)?n=[].slice.call(document.querySelectorAll(t)):d.isObject(t)&&t.attributes&&(n=[t]),r._elements=n,r.length=n.length,r;var o=document.createElement(t);for(var i in e)o[i]=e[i]},j.prototype.on=function(t,e){var r=this,n=r._elements;t=t.split(" ");for(var o=0,i=n.length;i>o;o++)for(var a=n[o],s=0,u=t.length;u>s;s++)a.addEventListener&&a.addEventListener(t[s],e,!1)},j.prototype.find=function(t){var e=this,r=e.get(0),n=[];return d.isString(t)&&(n=[].slice.call(r.querySelectorAll(t))),e._elements=n,e},j.prototype.get=function(t,e){var r=this,n=r._elements||[],o=n[t]||{};return e?(r._element=o,r):d.isNumber(t)?o:n},j.prototype.reverse=function(){return this._elements=this._elements.reverse(),this},j.prototype.val=function(t){return this.prop("value",t)},j.prototype.type=function(t){return this.prop("type",t)},j.prototype.html=function(t){return this.prop("innerHTML",t)},j.prototype.text=function(t){return this.prop("innerHTML",f(t))},j.prototype.prop=function(t,e){var r=this,n=r._elements;for(var o in n){if(d.isUndefined(e))return n[o][t];n[o][t]=e}},j.prototype.attr=function(t,e){var r=this,n=r._elements;for(var o in n){if(void 0===e)return n[o].getAttribute(t);n[o].setAttribute(t,e)}return r},j.prototype.removeAttr=function(t){var e=this;for(var r in e._elements)e._elements[r].removeAttribute(t);return e},j.prototype.addClass=function(t){var e=this;for(var r in e._elements)e._elements[r].classList.add(t);return e},j.prototype.removeClass=function(t){var e=this;for(var r in e._elements)e._elements[r].classList.remove(t);return e},j.prototype.parents=function(t){for(var e=this,r=e.get(0),n=r.parentNode,o=[];null!==n;){var a=n,s=i(a,t),u=void 0===a.doctype?!0:!1;t||(s=!0),s&&u&&o.push(a),n=a.parentNode}return e._elements=o,e},j.prototype.parent=function(t){var e=this,r=e.get(0),n=r.parentNode,o=i(n,t);return t||(o=!0),o?n:{}},j.prototype.clone=function(t){var e=this,r=e.get(0),n=r.cloneNode(!0);return e._elements=[n],t?e:n},j.prototype.empty=function(t){var e=this,r=e.get(0);if(!r||!r.hasChildNodes)return t?e:r;for(;r.hasChildNodes();)r.removeChild(r.lastChild);return t?e:r},j.prototype.replaceWith=function(t){var e=this,r=e.get(0),n=r.parentNode;n.replaceChild(t,r)},j.prototype.ready=function(t){document&&d.isFunction(document.addEventListener)?document.addEventListener("DOMContentLoaded",t,!1):window&&d.isFunction(window.addEventListener)?window.addEventListener("load",t,!1):document.onreadystatechange=function(){"complete"===document.readyState&&t()}},t=new o;var k=null,E=function(r){k&&clearTimeout(k),k=setTimeout(function(){var n=e.dom(r.target).get(0);t.dom(n).toStorage()},t.options.timeout)},C=function(e){e.preventDefault();var r=t.dom(this).getOptions();t.remove(r.data,r)},D=function(e){e.preventDefault();var r=t.dom(this).getOptions();if(!r||!r["action-push"])return!1;var n=r["action-push"].split(":"),o=n[0]||null,i=n[1]||null;t.push(o,i,r)},T=function(e){e.preventDefault();var r=t.dom(this).getOptions();return r&&r["action-remove"]?void t.remove(r["action-remove"],r):!1},J=null,L=function(){J&&clearTimeout(J),J=setTimeout(function(){t.registerDependencies(),M()},t.options.timeoutDOM)};e=new j,t.w=e;var M=function(){e.dom("body").on("DOMSubtreeModified",L),e.dom("["+r+"-data]").on("input change",E),e.dom("["+r+"-clear]").on("click",C),e.dom("["+r+"-action-remove]").on("click",T),e.dom("["+r+"-action-push]").on("click",D)},F=function(){M(),t.restore(),t.setDefaults(),t.registerDependencies(),t.updateDependencies()};return e.ready(F),t})});