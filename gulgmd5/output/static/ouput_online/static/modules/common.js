define("common",function(n){window.$=window.jQuery=n("jquery"),window.baseJS=n("jquery.base"),window.debugModel=!0,window.location.origin=window.location.origin||location.protocol+"//"+location.host;var e="/kbwx_server";window.server=window.location.origin+e,$(function(){$("body").css("min-height",$(window).height()),$(".bg").css("min-height",$(window).height());var n=baseJS.App.getSystem();if(n.ios){var e;$("body").bind("touchend",function(n){var t=(new Date).getTime(),o=$(this).data("lastTouch")||t+1,i=t-o;clearTimeout(e),500>i&&i>0?n.preventDefault():($(this).data("lastTouch",t),e=setTimeout(function(){clearTimeout(e)},500,[n])),$(this).data("lastTouch",t)})}});var t=baseJS.App.getSystem();t.android||(window.alert=function(n){var e=document.createElement("IFRAME");e.style.display="none",e.setAttribute("src","data:text/plain,"),document.documentElement.appendChild(e),window.frames[0].window.alert("\n"+n),e.parentNode.removeChild(e)},window.confirm=function(n){var e=document.createElement("IFRAME");e.style.display="none",e.setAttribute("src","data:text/plain,"),document.documentElement.appendChild(e);var t=window.frames[0].window.confirm("\n"+n);return e.parentNode.removeChild(e),t},window.prompt=function(n){var e=document.createElement("IFRAME");e.style.display="none",e.setAttribute("src","data:text/plain,"),document.documentElement.appendChild(e);var t=window.frames[0].window.prompt("\n"+n);return e.parentNode.removeChild(e),t}),window.newtab=function(n){if(0!==n.indexOf("http:")||0!==n.indexOf("https:")){var e=0===n.indexOf("/")?"":window.location.pathname;n=window.location.origin+e+n}t.xs?window.location.href="newtab:"+n:window.open(n,"_blank")},$("body").on("click","a[target=_blank]",function(){return newtab($(this).attr("href").replace(/^newtab:/,"")),!1}),$("a[target=_blank]").on("click",function(){return newtab($(this).attr("href").replace(/^newtab:/,"")),!1}),window.addEventListener("error",function(n){debugModel&&alert("出错啦！\n"+n.message+"\n"+n.filename+" : "+n.lineno+"|"+n.colno)}),window.getUrlParam=function(n){var e=new RegExp("(^|&)"+n+"=([^&]*)(&|$)"),t=window.location.search.substr(1).match(e);return null!=t?decodeURI(t[2]):null},window.getAllUrlParam=function(){return window.location.search.substr(1)},window.strParamToObj=function(n){var e={};n=n.replace(/^\?/,"");var t=n.split("&");for(var o in t)item=t[o].split("="),e[item[0]]=e[item[0]]?e[item[0]]+","+item[1]:item[1];return e},window.getNewUrl=function(n,e){var t=-1===n.indexOf("?")?"?":"&";return n+t+e},window.gotoCart=function(){window.location.href="/app/user/cart.html"},window.getCookie=function(n){for(var e=document.cookie,t=e.split("; "),o=0;o<t.length;o++){var i=t[o].split("=");if(i[0]==n)return decodeURI(i[1])}return""},window.getShopName=function(){return getCookie("shopName")||"扫码购物"},window.getCartItemCount=function(){return getCookie("getCartItemCount")||0},window.toMoney=function(n){return(parseFloat(n)||0).toFixed(2)},window.onresume=window.onresume||function(){console.error("default onresume function !")},window.initPageParam=window.initPageParam||"",window.closeAutoCallback=window.closeAutoCallback||function(){if(initPageParam){var n=baseJS.App.getSystem(),e=initPageParam.replace(/carItemCount":"\d*"/,'carItemCount":"'+getCartItemCount()+'"');if(!n.xs)return void this._callplus("initPage","",e);if(n.android)window.AndroidToJs.jsPushDataToAndroid("index",e);else if(n.ios){var t=encodeURI('http://smg/{"dataType":"changebtnType","jsonData":'+e+"}");baseJS.App.iosCall(t)}}console.info("default closeAutoCallback function which update cart number!")},window.paySuccessCallback=window.paySuccessCallback||function(){console.error("default paySuccessCallback function !")},window.passwordSetCallback=window.passwordSetCallback||function(){console.error("default passwordSetCallback function !")},window.recharge=window.recharge||function(){console.error("default recharge function !")},window.orderOverCallback=window.closeAutoCallback||function(){console.error("default orderOverCallback function !")},window.defaultProImg="/static/img/products/default_pro.png",window.defaultImg_612_250="/static/img/products/default_612_250.png",window.defaultImg_300_170="/static/img/products/default_300_170.png",window.goSearch=function(n){window.location.href="/app/category/search.html?s="+n},window.checkFileSize=function(n,e){var t=$(n).val();if(is_null(t))return!0;var o=0;if(!$.support.leadingWhitespace){o=$(n)[0].files[0].size;var i=o/1024;return i>e?!1:!0}var a=new Image;return a.src=t,a.fileSize>0&&a.fileSize>1024*e?!1:!0},window.getFormJson=function(n,e){var t={},o=$(n).serializeArray();return o.push(e),$.each(o,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},window.gotoLogin=function(){window.location="/wap/user/login.html"},window.showMsg=function(n){alert(n)},window.is_null=function(n){return null==n||""==n||"undefined"==n||void 0==n},window.is_not_null=function(n){return""!=n&&null!=n&&void 0!=n&&"undefined"!=n}});